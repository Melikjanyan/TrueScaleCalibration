<form (ngSubmit)="submit()" [formGroup]="form" class="contact-form" novalidate>
  <h2 class="form-title">Schreib mir eine Nachricht</h2>

  <div class="field">
    <label for="name">Name (optional)</label>
    <input id="name" type="text" formControlName="name" placeholder="Dein Name" />
  </div>

  <div class="field">
    <label for="email">E-Mail</label>
    <input id="email" type="email" formControlName="email" placeholder="dein@beispiel.de" required
           [class.invalid]="form.get('email')?.invalid && form.get('email')?.touched" />
    <small class="hint error" *ngIf="form.get('email')?.invalid && form.get('email')?.touched">
      Bitte eine gültige E-Mail eingeben.
    </small>
  </div>

  <div class="field">
    <label for="message">Nachricht</label>
    <textarea id="message" formControlName="message" rows="5" placeholder="Worum geht’s?" required
              [class.invalid]="form.get('message')?.invalid && form.get('message')?.touched"></textarea>
    <small class="hint error" *ngIf="form.get('message')?.invalid && form.get('message')?.touched">
      Bitte eine Nachricht eingeben (mind. 3 Zeichen).
    </small>
  </div>

  <!-- Honeypot: visuell versteckt, aber NICHT display:none -->
  <div class="sr-only">
    <label for="hp">Telefon</label>
    <input id="hp" type="text" formControlName="hp" tabindex="-1" autocomplete="off" />
  </div>

  <div class="field checkbox">
    <label>
      <input type="checkbox" formControlName="agree" required />
      Ich stimme der Verarbeitung meiner Angaben zu.
    </label>
    <small class="hint error" *ngIf="form.get('agree')?.invalid && form.get('agree')?.touched">
      Bitte zustimmen, sonst kann ich nicht antworten.
    </small>
  </div>

  <button class="btn" type="submit" [disabled]="sending || form.invalid">
    <span *ngIf="!sending">Senden</span>
    <span *ngIf="sending">Senden…</span>
  </button>

  <p class="alert success" *ngIf="success" aria-live="polite">Deine Nachricht wurde gesendet. Danke!</p>
  <p class="alert error" *ngIf="error" aria-live="assertive">Fehler: {{ error }}</p>
</form>
